{"componentChunkName":"component---src-pages-docs-mdx-slug-js","path":"/docs/utils/atom-with-storage","result":{"data":{"mdx":{"slug":"utils/atom-with-storage","frontmatter":{"title":"atomWithStorage","description":null},"body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"atomWithStorage\"\n};\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\nvar CodeSandbox = makeShortcode(\"CodeSandbox\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"\\u5F15\\u7528: \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/pmndrs/jotai/pull/394\"\n  }, \"https://github.com/pmndrs/jotai/pull/394\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"import { useAtom } from \\\"jotai\\\";\\nimport { atomWithStorage } from \\\"jotai/utils\\\";\\n\\nconst darkModeAtom = atomWithStorage(\\\"darkMode\\\", false);\\n\\nconst Page = () => {\\n  const [darkMode, setDarkMode] = useAtom(darkModeAtom);\\n\\n  return (\\n    <>\\n      <h1>Welcome to {darkMode ? \\\"dark\\\" : \\\"light\\\"} mode!</h1>\\n      <button onClick={() => setDarkMode(!darkMode)}>toggle theme</button>\\n    </>\\n  );\\n};\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"atomWithStorage\"), \" \\u51FD\\u6570\\u521B\\u5EFA\\u4E00\\u4E2A\\u539F\\u5B50\\uFF0C\\u5176\\u503C\\u4FDD\\u5B58\\u5728\\u7528\\u4E8E React \\u7684 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"localStorage\"), \" \\u6216 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sessionStorage\"), \" \\u6216\\u7528\\u4E8E React Native \\u7684 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AsyncStorage\"), \" \\u4E2D\\u3002\"), mdx(\"h2\", null, \"\\u53C2\\u6570\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"key\"), \" (required): \\u4E0E localStorage\\u3001sessionStorage \\u6216 AsyncStorage \\u540C\\u6B65\\u72B6\\u6001\\u65F6\\u7528\\u4F5C key \\u7684\\u552F\\u4E00\\u5B57\\u7B26\\u4E32\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"initialValue\"), \" (required): \\u539F\\u5B50\\u521D\\u59CB\\u503C\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"storage\"), \" (optional): \\u4E00\\u4E2A\\u5BF9\\u8C61:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u7528\\u4E8E\\u5B58\\u50A8/\\u68C0\\u7D22\\u6301\\u4E45\\u72B6\\u6001\\u7684 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"getItem\"), \" \\u548C \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"setItem\"), \" \\u65B9\\u6CD5\\uFF1B \\u9ED8\\u8BA4\\u4F7F\\u7528 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"localStorage\"), \" \\u8FDB\\u884C\\u5B58\\u50A8/\\u68C0\\u7D22\\uFF0C\\u4F7F\\u7528 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"JSON.stringify()\"), \"/\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"JSON.parse()\"), \" \\u8FDB\\u884C\\u5E8F\\u5217\\u5316/\\u53CD\\u5E8F\\u5217\\u5316\\u3002\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u53EF\\u9009\\u5730\\uFF0C\\u5B58\\u50A8\\u6709\\u4E00\\u4E2A \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"subscribe\"), \" \\u5C5E\\u6027\\uFF0C\\u53EF\\u7528\\u4E8E\\u540C\\u6B65\\u5B58\\u50A8\\u3002 \\u9ED8\\u8BA4\\u7684 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"localStorage\"), \" \\u5904\\u7406\\u8DE8\\u8868\\u540C\\u6B65\\u7684 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"storage\"), \" \\u4E8B\\u4EF6\\u3002\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u53EF\\u9009\\u5730\\uFF0C\\u5B58\\u50A8\\u6709\\u4E00\\u4E2A \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"delayInit\"), \" (\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"boolean\"), \") \\u5C5E\\u6027\\uFF0C\\u53EF\\u4EE5\\u7528\\u6765\\u544A\\u8BC9 jotai \\u662F\\u5426\\u4F7F\\u7528 Suspense\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"delayInit: true\"), \" \\u4E0D\\u4F1A\\u5728\\u7B2C\\u4E00\\u6B21\\u8BFB\\u53D6\\u539F\\u5B50\\u503C\\u65F6\\u6682\\u505C\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"delayInit: false\"), \"\\uFF08\\u9ED8\\u8BA4\\uFF09\\u5C06\\u5728\\u7B2C\\u4E00\\u6B21\\u8BFB\\u53D6\\u539F\\u5B50\\u503C\\u65F6\\u6682\\u505C\")))), mdx(CodeSandbox, {\n    id: \"vuwi7\",\n    mdxType: \"CodeSandbox\"\n  }), mdx(\"h2\", null, \"\\u670D\\u52A1\\u5668\\u7AEF\\u6E32\\u67D3\"), mdx(\"p\", null, \"\\u4EFB\\u4F55\\u4F9D\\u8D56\\u4E8E\\u5B58\\u50A8\\u539F\\u5B50\\u503C\\u7684 JSX \\u6807\\u8BB0\\uFF08\\u4F8B\\u5982\\uFF0C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"className\"), \" \\u6216 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"style\"), \" \\u5C5E\\u6027\\uFF09\\u5728\\u670D\\u52A1\\u5668\\u4E0A\\u5448\\u73B0\\u65F6\\u5C06\\u4F7F\\u7528 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"initialValue\"), \"\\uFF08\\u56E0\\u4E3A \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"localStorage\"), \" \\u548C \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sessionStorage\"), \" \\u5728\\u670D\\u52A1\\u5668\\u4E0A\\u4E0D\\u53EF\\u7528\\uFF09\\u3002\"), mdx(\"p\", null, \"\\u8FD9\\u610F\\u5473\\u7740\\u5982\\u679C\\u7528\\u6237\\u7684 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"storedValue\"), \" \\u4E0E \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"initialValue\"), \" \\u4E0D\\u540C\\uFF0C\\u90A3\\u4E48\\u6700\\u521D\\u4F5C\\u4E3A HTML \\u63D0\\u4F9B\\u7ED9\\u7528\\u6237\\u6D4F\\u89C8\\u5668\\u7684\\u5185\\u5BB9\\u4E0E React \\u5728 rehydration \\u8FC7\\u7A0B\\u4E2D\\u6240\\u671F\\u671B\\u7684\\u5185\\u5BB9\\u4E4B\\u95F4\\u5C06\\u5B58\\u5728\\u4E0D\\u5339\\u914D\\u3002\"), mdx(\"p\", null, \"\\u9488\\u5BF9\\u6B64\\u95EE\\u9898\\u7684\\u5EFA\\u8BAE\\u89E3\\u51B3\\u65B9\\u6CD5\\u662F\\u901A\\u8FC7\\u5C06\\u5185\\u5BB9\\u5305\\u88C5\\u5728 \", \"[\\u81EA\\u5B9A\\u4E49\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<ClientOnly>\"), \"\\u5305\\u88C5\\u5668]\", \"(\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.joshwcomeau.com/react/the-perils-of-rehydration/#abstractions%EF%BC%89%EF%BC%8C%E4%BB%85%E5%9C%A8\"\n  }, \"https://www.joshwcomeau.com/react/the-perils-of-rehydration/#abstractions\\uFF09\\uFF0C\\u4EC5\\u5728\"), \" rehydration \\u540E\\u5448\\u73B0\\u3002 \\u66FF\\u4EE3\\u89E3\\u51B3\\u65B9\\u6848\\u5728\\u6280\\u672F\\u4E0A\\u662F\\u53EF\\u884C\\u7684\\uFF0C\\u4F46\\u5728\\u5C06 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"initialValue\"), \" \\u4EA4\\u6362\\u4E3A \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"storedValue\"), \" \\u65F6\\u9700\\u8981\\u77ED\\u6682\\u7684\\u201C\\u95EA\\u70C1\\u201D\\uFF0C\\u8FD9\\u53EF\\u80FD\\u4F1A\\u5BFC\\u81F4\\u4E0D\\u6109\\u5FEB\\u7684\\u7528\\u6237\\u4F53\\u9A8C\\uFF0C\\u56E0\\u6B64\\u5EFA\\u8BAE\\u91C7\\u7528\\u6B64\\u89E3\\u51B3\\u65B9\\u6848\\u3002\"), mdx(\"h2\", null, \"\\u4ECE\\u5B58\\u50A8\\u4E2D\\u5220\\u9664\\u9879\\u76EE\"), mdx(\"p\", null, \"\\u5BF9\\u4E8E\\u8981\\u4ECE\\u5B58\\u50A8\\u4E2D\\u5220\\u9664\\u9879\\u76EE\\u7684\\u60C5\\u51B5\\uFF0C\\n\\u4F7F\\u7528 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"atomWithStorage\"), \" \\u521B\\u5EFA\\u7684\\u539F\\u5B50\\u5728\\u5199\\u5165\\u65F6\\u63A5\\u53D7 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RESET\"), \" \\u7B26\\u53F7\\u3002\"), mdx(\"p\", null, \"\\u6709\\u5173\\u7528\\u6CD5\\uFF0C\\u8BF7\\u53C2\\u89C1\\u4EE5\\u4E0B\\u793A\\u4F8B\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"import { useAtom } from \\\"jotai\\\";\\nimport { atomWithStorage, RESET } from \\\"jotai/utils\\\";\\n\\nconst textAtom = atomWithStorage(\\\"text\\\", \\\"hello\\\");\\n\\nconst TextBox = () => {\\n  const [text, setText] = useAtom(textAtom);\\n\\n  return (\\n    <>\\n      <input value={text} onChange={(e) => setText(e.target.value)} />\\n      <button onClick={() => setText(RESET)}>Reset (to 'hello')</button>\\n    </>\\n  );\\n};\\n\")), mdx(\"p\", null, \"\\u5982\\u679C\\u9700\\u8981\\uFF0C\\u60A8\\u8FD8\\u53EF\\u4EE5\\u6839\\u636E\\u5148\\u524D\\u7684\\u503C\\u8FDB\\u884C\\u6761\\u4EF6\\u91CD\\u7F6E\\u3002\"), mdx(\"p\", null, \"\\u5982\\u679C\\u60A8\\u5E0C\\u671B\\u5728\\u5148\\u524D\\u7684\\u503C\\u6EE1\\u8DB3\\u6761\\u4EF6\\u7684\\u60C5\\u51B5\\u4E0B\\u6E05\\u9664 localStorage \\u4E2D\\u7684\\u952E\\uFF0C\\u8FD9\\u5C06\\u7279\\u522B\\u6709\\u7528\\u3002\"), mdx(\"p\", null, \"\\u4E0B\\u9762\\u4E3E\\u4F8B\\u8BF4\\u660E\\u4E86\\u8FD9\\u79CD\\u7528\\u6CD5\\uFF0C\\u53EA\\u8981\\u524D\\u4E00\\u4E2A\\u503C\\u4E3A \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"true\"), \"\\uFF0C\\u5C31\\u4F1A\\u6E05\\u9664 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"visible\"), \" \\u952E\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-jsx\"\n  }, \"import { useAtom } from 'jotai'\\nimport { atomWithStorage, RESET } from 'jotai/utils'\\n\\nconst isVisibleAtom = atomWithStorage('visible', false)\\n\\nconst TextBox = () => {\\n  const [isVisible, setIsVisible] = useAtom(isVisibleAtom)\\n\\n  return (\\n    <>\\n      { isVisible && <h1>Header is visible!</h1> }\\n      <button onClick={() => setIsVisible((prev) => prev ? RESET : true))}>Toggle visible</button>\\n    </>\\n  )\\n}\\n\")), mdx(\"h2\", null, \"React-Native \\u5B9E\\u73B0\"), mdx(\"p\", null, \"\\u60A8\\u53EF\\u4EE5\\u4F7F\\u7528\\u4EFB\\u4F55\\u5B9E\\u73B0 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getItem\"), \"\\u3001\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"setItem\"), \" \\u548C \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"removeItem\"), \" \\u7684\\u5E93\\u3002\\n\\u5047\\u8BBE\\u60A8\\u5C06\\u4F7F\\u7528\\u793E\\u533A\\u63D0\\u4F9B\\u7684\\u6807\\u51C6 AsyncStorage\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"import { atomWithStorage, createJSONStorage } from \\\"jotai/utils\\\";\\nimport AsyncStorage from \\\"@react-native-async-storage/async-storage\\\";\\n\\nconst storage = createJSONStorage(() => AsyncStorage);\\nconst content = {}; // \\u4EFB\\u4F55\\u53EF\\u5E8F\\u5217\\u5316\\u7684 JSON\\nconst storedAtom = atomWithStorage(\\\"stored-key\\\", content, storage);\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"de727c5d-96fb-54e3-ba3c-b84f88bcec8f","slug":"utils/atom-with-storage","__params":{"slug":"utils"}}},"staticQueryHashes":["171421096","4167841181","930225796"]}