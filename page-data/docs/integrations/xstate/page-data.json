{"componentChunkName":"component---src-pages-docs-mdx-slug-js","path":"/docs/integrations/xstate","result":{"data":{"mdx":{"slug":"integrations/xstate","frontmatter":{"title":"XState","description":"This doc describes XState integration."},"body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"XState\",\n  \"description\": \"This doc describes XState integration.\",\n  \"nav\": 4.04\n};\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\nvar CodeSandbox = makeShortcode(\"CodeSandbox\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Jotai \\u7684\\u72B6\\u6001\\u7BA1\\u7406\\u539F\\u59CB\\u800C\\u7075\\u6D3B\\uFF0C\\u4F46\\u6709\\u65F6\\u4E5F\\u610F\\u5473\\u7740\\u8FC7\\u4E8E\\u81EA\\u7531\\u3002\\nXState \\u662F\\u4E00\\u4E2A\\u590D\\u6742\\u7684\\u5E93\\uFF0C\\u53EF\\u4E3A\\u72B6\\u6001\\u7BA1\\u7406\\u63D0\\u4F9B\\u66F4\\u597D\\u3001\\u66F4\\u5B89\\u5168\\u7684\\u62BD\\u8C61\\u3002\"), mdx(\"h2\", null, \"\\u5B89\\u88C5\"), mdx(\"p\", null, \"\\u60A8\\u5FC5\\u987B\\u5B89\\u88C5 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"xstate\"), \" \\u548C \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"jotai-xstate\"), \" \\u624D\\u80FD\\u4F7F\\u7528\\u6B64\\u529F\\u80FD\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"npm install xstate jotai-xstate\\n# or\\nyarn add xstate jotai-xstate\\n\")), mdx(\"h2\", null, \"atomWithMachine\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"atomWithMachine\"), \" \\u4F7F\\u7528 XState machine \\u521B\\u5EFA\\u4E00\\u4E2A\\u65B0\\u539F\\u5B50\\u3002\\n\\u5B83\\u63A5\\u6536\\u4E00\\u4E2A\\u51FD\\u6570 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getMachine\"), \" \\u6765\\u521B\\u5EFA\\u4E00\\u4E2A\\u65B0\\u72B6\\u6001\\u673A\\u3002\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getMachine\"), \" \\u5728\\u7B2C\\u4E00\\u6B21\\u4F7F\\u7528\\u65F6\\u8C03\\u7528 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"get\"), \" \\u53C2\\u6570\\uFF0C\\u60A8\\u53EF\\u4EE5\\u4F7F\\u7528\\u5B83\\u8BFB\\u53D6\\u5176\\u4ED6\\u539F\\u5B50\\u503C\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-tsx\"\n  }, \"import { useAtom } from \\\"jotai\\\";\\nimport { atomWithMachine } from \\\"jotai-xstate\\\";\\nimport { assign, createMachine } from \\\"xstate\\\";\\n\\nconst createEditableMachine = (value: string) =>\\n  createMachine<{ value: string }>({\\n    id: \\\"editable\\\",\\n    initial: \\\"reading\\\",\\n    context: {\\n      value,\\n    },\\n    states: {\\n      reading: {\\n        on: {\\n          dblclick: \\\"editing\\\",\\n        },\\n      },\\n      editing: {\\n        on: {\\n          cancel: \\\"reading\\\",\\n          commit: {\\n            target: \\\"reading\\\",\\n            actions: assign({\\n              value: (_, { value }) => value,\\n            }),\\n          },\\n        },\\n      },\\n    },\\n  });\\n\\nconst defaultTextAtom = atom(\\\"edit me\\\");\\nconst editableMachineAtom = atomWithMachine((get) =>\\n  // `get` \\u4EC5\\u53EF\\u7528\\u4E8E\\u521D\\u59CB\\u5316\\u72B6\\u6001\\u673A\\n  createEditableMachine(get(defaultTextAtom))\\n);\\n\\nconst Toggle = () => {\\n  const [state, send] = useAtom(editableMachineAtom);\\n\\n  return (\\n    <div>\\n      {state.matches(\\\"reading\\\") && (\\n        <strong onDoubleClick={send}>{state.context.value}</strong>\\n      )}\\n      {state.matches(\\\"editing\\\") && (\\n        <input\\n          autoFocus\\n          defaultValue={state.context.value}\\n          onBlur={(e) => send({ type: \\\"commit\\\", value: e.target.value })}\\n          onKeyDown={(e) => {\\n            if (e.key === \\\"Enter\\\") {\\n              send({ type: \\\"commit\\\", value: e.target.value });\\n            }\\n            if (e.key === \\\"Escape\\\") {\\n              send(\\\"cancel\\\");\\n            }\\n          }}\\n        />\\n      )}\\n      <br />\\n      <br />\\n      <div>\\n        Double-click to edit. Blur the input or press <code>enter</code> to\\n        commit. Press <code>esc</code> to cancel.\\n      </div>\\n    </div>\\n  );\\n};\\n\")), mdx(\"h2\", null, \"\\u5B58\\u50A8\\u5728\\u5168\\u5C40 Provider \\u4E2D\\u7684\\u53EF\\u91CD\\u542F\\u72B6\\u6001\\u673A\\uFF08\\u65E0 Provider \\u6A21\\u5F0F\\uFF09\"), mdx(\"p\", null, \"\\u5F53\\u60A8\\u7684\\u72B6\\u6001\\u673A\\u8FBE\\u5230\\u5176\\u6700\\u7EC8\\u72B6\\u6001\\u65F6\\uFF0C\\u5B83\\u65E0\\u6CD5\\u518D\\u63A5\\u6536\\u4EFB\\u4F55\\u4E8B\\u4EF6\\u3002\\n\\u5982\\u679C\\u60A8\\u7684 atomWithMachine \\u5728\\u5168\\u5C40\\u8303\\u56F4\\u5185\\u521D\\u59CB\\u5316\\uFF08\\u4E5F\\u79F0\\u4E3A\\u65E0 Provider \\u6A21\\u5F0F\\uFF09\\uFF0C\\n\\u8981\\u91CD\\u65B0\\u542F\\u52A8\\u5B83\\uFF0C\\u60A8\\u9700\\u8981\\u50CF\\u8FD9\\u6837\\u5411\\u60A8\\u7684\\u72B6\\u6001\\u673A\\u53D1\\u9001\\u4E00\\u4E2A \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RESTART\"), \" \\u4E8B\\u4EF6\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-tsx\"\n  }, \"import { RESTART } from \\\"jotai-xstate\\\";\\n\\nconst YourComponent = () => {\\n  const [current, send] = useAtom(yourMachineAtom);\\n\\n  const isFinalState = current.matches(\\\"myFinalState\\\");\\n\\n  useEffect(() => {\\n    // \\u5728\\u7EC4\\u4EF6\\u5378\\u8F7D\\u65F6\\u91CD\\u65B0\\u542F\\u52A8\\u5168\\u5C40\\u521D\\u59CB\\u5316\\u7684\\u72B6\\u6001\\u673A\\n    return () => {\\n      if (isFinalState) send(RESTART);\\n    };\\n  }, [isFinalState]);\\n};\\n\")), mdx(\"h2\", null, \"\\u793A\\u4F8B\"), mdx(\"p\", null, \"\\u4F7F\\u7528 atomWithMachine \\u68C0\\u67E5\\u793A\\u4F8B\\uFF1A\"), mdx(CodeSandbox, {\n    id: \"fxtoe3\",\n    mdxType: \"CodeSandbox\"\n  }), mdx(\"p\", null, \"\\u53EF\\u91CD\\u542F\\u72B6\\u6001\\u673A\\uFF1A\"), mdx(CodeSandbox, {\n    id: \"n179xd\",\n    mdxType: \"CodeSandbox\"\n  }), mdx(\"h2\", null, \"\\u6559\\u7A0B\"), mdx(\"p\", null, \"\\u67E5\\u770B\\u6709\\u5173 Jotai \\u548C XState \\u7684\\u8BFE\\u7A0B\\u3002\"), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://egghead.io/courses/complex-state-management-in-react-with-jotai-and-xstate-3be0a740\"\n  }, \"React \\u4E0E Jotai \\u548C XState \\u7684\\u590D\\u6742\\u72B6\\u6001\\u7BA1\\u7406\")), mdx(\"p\", null, \"\\uFF08\\u6CE8\\u610F\\uFF1A\\u5728\\u8BFE\\u7A0B\\u4E2D\\uFF0C\\u5B83\\u4F7F\\u7528 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"jotai/xstate\"), \" \\u88AB \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"jotai-xstate\"), \" \\u53D6\\u4EE3\\u3002\\uFF09\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"24ee9a7e-f7cf-5998-88b9-6b7c4c52a73a","slug":"integrations/xstate","__params":{"slug":"integrations"}}},"staticQueryHashes":["171421096","4167841181","930225796"]}